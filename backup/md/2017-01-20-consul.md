---
title: consul
date: 2017-01-20 19:50:42
categories: ["consul"]
tags: ["consul"]
---

## consul
> 参考：http://blog.csdn.net/mn960mn/article/details/51753893
```bash
docker rm -v $(docker ps -a|grep consul |awk '{print $1}')

docker network create app

consul agent -server -bootstrap-expect 2 -data-dir /tmp/consul -node=n1 -bind=你的ip -dc=dc1

docker run -d --name consul1 --net=app -p 8400:8400 -p 8500:8500 -p 8600:8600 -h consul1 zhaoxunyong/consul \
 -server -bootstrap -bind=0.0.0.0 -client=172.18.0.2 -data-dir=data -ui -node=node1

docker run -d --name consul2 --net=app -p 8401:8400 -p 8501:8500 -h consul2 zhaoxunyong/consul \
 -bind=0.0.0.0 -client=172.18.0.3 -data-dir=data -node=node2 -join=172.18.0.2

docker run -d --name consul3 --net=app -p 8402:8400 -p 8502:8500 -h consul3 zhaoxunyong/consul \
 -bind=0.0.0.0 -client=172.18.0.4 -data-dir=data -node=node3 -join=172.18.0.2

docker exec consul1 bin/consul members -rpc-addr=172.18.0.2:8400

docker start consul1 consul2 consul3
```

http://192.168.10.9:8500/