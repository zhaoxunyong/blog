---
title: vscode的使用与插件开发
date: 2019-04-28 15:06:57
categories: ["vscode"]
tags: ["vscode"]
toc: true
---

Visual Studio Code（VS code）是开发神器，通过插件配置不仅可以开发前端，还可以开发后端(java/go等)，下面介绍一下vscode的常用插件与插件如何开发一个自己的插件。

<!-- more -->

## git-bash

```bash
#https://code.visualstudio.com/docs/editor/integrated-terminal
"terminal.integrated.shell.windows": "D:\\Developer\\Git\\git-cmd.exe",
"terminal.integrated.shellArgs.windows": [
"--command=usr/bin/bash.exe",
"-l",
"-i"
]
```

## nodejs

```bash
curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.34.0/install.sh | bash
. ~/.bashrc
#显示有远端的版本
nvm ls-remote
#安装对应的版本
nvm install 对应的版本
```

安装常用工具：

```bash
npm install  hexo-cli -g
npm install hexo-server -g
npm install hexo-deployer-git -g
npm install yarn -g
npm install http-server -g
yarn global add serve

npm config set registry https://registry.npm.taobao.org --global
npm config set disturl https://npm.taobao.org/dist --global
yarn config set registry https://registry.npm.taobao.org --global
yarn config set disturl https://npm.taobao.org/dist --global
```

## 常用插件

安装以下插件：
```bash
#javascript
eslint
Color Picker
npm
Debugger for Chrome
Eclipse Keymap
#react
ES7 React/Redux/GraphQL/React-Native snippets
#vue
Vetur
Vue VSCode Snippets
#git
GitLens
zerofinance-git
#其他公共插件
Local History
XML Tools
Prettier
#https://zhuanlan.zhihu.com/p/54031899
koroFileHeader
AutoFileName
Import Cost

#java
Java Extension Pack
Spring Boot Extension Pack
Java Code Generators
Tomcat for Java
Docker

#android/ios plugin
Android iOS Emulator
React Native Tools
#see debug:https://github.com/Microsoft/vscode-react-native/blob/master/doc/debugging.md#debugging-on-ios-device
#Install ios-deploy: npm install -g ios-deploy
```

可以在项目的.vscode目录下添加extensions.json，并添加以下内容，当第一次打开时会提示是否需要安装这些推荐的插件：

```js
{
    "recommendations": [
        "dbaeumer.vscode-eslint",
        "anseki.vscode-color",
        "eg2.vscode-npm-script",
        "msjsdiag.debugger-for-chrome",
        "alphabotsec.vscode-eclipse-keybindings",
        "dsznajder.es7-react-js-snippets",
        "eamodio.gitlens",
        "zerofinance.zerofinance-git",
        "xyz.local-history",
        "DotJoshJohnson.xml",
        "esbenp.prettier-vscode",
        "OBKoro1.korofileheader",
        "JerryHong.autofilename",
        "wix.vscode-import-cost"
    ]
}

```

可以通过命令行批量安装：

```bash
#前端------
code --install-extension dbaeumer.vscode-eslint
code --install-extension anseki.vscode-color
code --install-extension eg2.vscode-npm-script
code --install-extension msjsdiag.debugger-for-chrome
code --install-extension alphabotsec.vscode-eclipse-keybindings
#react
code --install-extension dsznajder.es7-react-js-snippets
#vue
code --install-extension octref.vetur
code --install-extension sdras.vue-vscode-snippets
#git
code --install-extension eamodio.gitlens
code --install-extension zerofinance.zerofinance-git
#others
code --install-extension xyz.local-history
code --install-extension DotJoshJohnson.xml
code --install-extension esbenp.prettier-vscode
code --install-extension OBKoro1.korofileheader
code --install-extension JerryHong.autofilename
code --install-extension wix.vscode-import-cost
#前端------

#java------
code --install-extension vscjava.vscode-java-pack
code --install-extension Pivotal.vscode-boot-dev-pack
code --install-extension sohibe.java-generate-setters-getters
#java------

#docker------
code --install-extension PeterJausovec.vscode-docker
#docker------

#android/ios plugin------
code --install-extension DiemasMichiels.emulate
code --install-extension vsmobile.vscode-react-native
#android/ios plugin------

#其它命令说明，不需要执行
#列出已经安装的插件
code --list-extensions
#安装某个插件
code --install-extension ms-vscode.cpptools
#卸载某个插件
code --uninstall-extension ms-vscode.csharp
```

## 代码注释

koroFileHeader添加注释，在全局的settings.json中添加：

参考：
- https://code.visualstudio.com/docs/editor/emmet
- https://www.cnblogs.com/summit7ca/p/6944215.html

```json
  "terminal.integrated.shell.windows": "D:\\Developer\\Git\\bin\\bash.exe",
  "terminal.external.windowsExec": "D:\\Developer\\Git\\bin\\bash.exe"
  "editor.fontSize": 14,
  "terminal.integrated.fontSize": 14,
  "emmet.triggerExpansionOnTab": true,
  "emmet.includeLanguages": {
      "javascript": "javascriptreact",
      "vue-html": "html",
      "razor": "html",
      "plaintext": "jade"
  },
  // 注释
  "fileheader.configObj": {
    // 将该选项设置为true即可开启
    "autoAdd": false
  },
  // 头部注释
  "fileheader.customMade": {
      "Author": "dave.zhao",
      "Date": "Do not edit",
      "LastEditors": "dave.zhao",
      "LastEditTime": "Do not edit",
      "Description": ""
  },
  // 函数注释
  "fileheader.cursorMode": {
      "Date": "Do not edit",
      "description": "",
      "param": ""
  }
```

注意：Author和LastEditors填写自己的名字

文件头注释快捷键：window：ctrl+alt+i,mac：ctrl+cmd+i

函数注释快捷键：window：ctrl+alt+t,mac：ctrl+cmd+t

## 常用配置

可以放在全局的settings.json中，也可以放在各个项目的settings.json中：

```json
{
    "eslint.validate": ["javascript", "javascriptreact"],
    "javascript.updateImportsOnFileMove.enabled": "always",
    // 代码缩进修改成4个空格
    "editor.detectIndentation": false,
    "editor.tabSize": 4,
    "editor.formatOnSave": true,
    // 每次保存的时候将代码按eslint格式进行修复
    "eslint.autoFixOnSave": true,
    // 让prettier使用eslint的代码格式进行校验
    "prettier.eslintIntegration": true,
    // 去掉代码结尾的分号
    "prettier.semi": false,
    // 使用带引号替代双引号
    "prettier.singleQuote": true,
    "prettier.tabWidth": 4,
    "prettier.printWidth": 250,
    // 让函数(名)和后面的括号之间加个空格
    "javascript.format.insertSpaceBeforeFunctionParenthesis": true
}
```

## Java

https://code.visualstudio.com/docs/languages/java
https://code.visualstudio.com/docs/remote/wsl
https://code.visualstudio.com/docs/java/java-tutorial
https://code.visualstudio.com/docs/java/java-project
https://code.visualstudio.com/docs/java/java-debugging
https://code.visualstudio.com/docs/java/extensions
https://code.visualstudio.com/docs/java/java-spring-boot

插件：

```bash
https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack
https://marketplace.visualstudio.com/items?itemName=Pivotal.vscode-boot-dev-pack
https://marketplace.visualstudio.com/items?itemName=adashen.vscode-tomcat
#wget http://mirrors.aliyun.com/apache/tomcat/tomcat-8/v8.5.61/bin/apache-tomcat-8.5.61-windows-x64.zip
#https://tomcat.apache.org/tomcat-8.5-doc/appdev/sample/
#WSL
https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack
```

Settings.json

terminal.integrated.shell.windows设置为git-bash的话不能启动java项目。

```bash
{
    "editor.fontSize": 16,
    // "terminal.integrated.shell.windows": "D:\\Developer\\Git\\git-cmd.exe",
    //     "terminal.integrated.shellArgs.windows": [
    //     "--command=usr/bin/bash.exe",
    //     "-l",
    //     "-i"
    // ],
    "git.autofetch": true,
    "terminal.integrated.fontSize": 16,
    "java.home": "D:\\Developer\\java\\jdk-11.0.9",
    "java.configuration.runtimes": [
        {
          "name": "JavaSE-1.8",
          "path": "C:\\Program Files\\Java\\jdk1.8.0_271",
          "default":  true
        },
        {
          "name": "JavaSE-11",
          "path": "D:\\Developer\\java\\jdk-11.0.9"
         }
      ],
      "files.exclude": {
        "**/.classpath": true,
        "**/.project": true,
        "**/.settings": true,
        "**/.factorypath": true
      },
      "maven.executable.path": "D:\\Developer\\apache-maven-3.3.9\\bin\\mvn.cmd",
      "java.configuration.maven.globalSettings": "D:\\Developer\\apache-maven-3.3.9\\conf\\settings.xml",
      "java.configuration.maven.userSettings": "D:\\Developer\\apache-maven-3.3.9\\conf\\settings.xml",
      "editor.suggestSelection": "first",
      "vsintellicode.modify.editor.suggestSelection": "automaticallyOverrodeDefaultValue",
      "java.project.importOnFirstTimeStartup": "automatic"
}
```

WSL for Settings.json

```bash
{
    "editor.fontSize": 16,
    "git.autofetch": true,
    "terminal.integrated.fontSize": 16,
    "java.home": "/Developer/java/jdk-11.0.9",
    "java.configuration.runtimes": [
        {
          "name": "JavaSE-1.8",
          "path": "/Developer/java/jdk1.8.0_271",
          "default":  true
        },
        {
          "name": "JavaSE-11",
          "path": "/Developer/java/jdk-11.0.9"
         }
      ],
      "files.exclude": {
        "**/.classpath": true,
        "**/.project": true,
        "**/.settings": true,
        "**/.factorypath": true
      },
      "maven.executable.path": "/Developer/apache-maven-3.3.9/bin/mvn",
      "java.configuration.maven.globalSettings": "/Developer/apache-maven-3.3.9/conf/settings.xml",
      "java.configuration.maven.userSettings": "/Developer/apache-maven-3.3.9/conf/settings.xml",
      "editor.suggestSelection": "first",
      "vsintellicode.modify.editor.suggestSelection": "automaticallyOverrodeDefaultValue"
}
```

Remote Debug:

```bash
#launch.json
{
    "configurations": [
        // {
        //     "type": "java",
        //     "name": "Spring Boot-TelepresenceK8sApplication<telepresence-k8s>",
        //     "request": "launch",
        //     "cwd": "${workspaceFolder}",
        //     "console": "internalConsole",
        //     "mainClass": "com.ctl.telepresencek8s.TelepresenceK8sApplication",
        //     "projectName": "telepresence-k8s",
        //     "args": ""
        // },
        {
            "type": "java",
            "name": "Debug (Attach)-Spring Boot-TelepresenceK8sApplication<telepresence-k8s>",
            "request": "attach",
            "projectName": "telepresence-k8s",
            "hostName": "localhost",
            "port": 8000
        }
    ]
}
```

## 插件开发

参考代码[https://github.com/zhaoxunyong/vs-code-git-plugin](https://github.com/zhaoxunyong/vs-code-git-plugin)，具体细节待补充。

## 参考
- https://segmentfault.com/a/1190000008968904
- https://www.cnblogs.com/virde/p/vscode-extension-input-and-output.html
- https://github.com/steveukx/git-js
- https://www.jianshu.com/p/2b096d8ad9b8
- https://github.com/Microsoft/vscode-extension-samples
- https://www.jianshu.com/p/520c575e91c3
- https://segmentfault.com/a/1190000017279102
- https://segmentfault.com/a/1190000014758981
- https://www.cnblogs.com/liuxianan/p/vscode-plugin-publish.html
- https://www.cnblogs.com/virde/p/vscode-extension-input-and-output.html
- https://www.cnblogs.com/virde/p/vscode-extension-input-and-output.html
- http://nodejs.cn/api/fs.html#fs_fs_unlinksync_path
